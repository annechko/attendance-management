{% extends 'menu-layout.html.twig' %}

{% block title %}Students{% endblock %}

{% block actions %}
    <a class="btn btn-sm btn-outline-secondary" href="{{ path('admin_student_new') }}">Create new</a>
{% endblock %}

{% block contents %}

    <div class="table-responsive">
        <table class="table table-sm table-hover">
            <thead>
            <tr class="table-primary">
                <th scope="col">Id</th>
                <th scope="col">Name</th>
                <th scope="col">Surname</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for student in students %}
                <tr onclick="editStudent({{ student.id }})">
                    <td>{{ student.id }}</td>
                    <td>{{ student.name }}</td>
                    <td>{{ student.surname }}</td>
                    <td >
{#}                        <a class="me-2 link-secondary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="{{ path('admin_student_show', {'id': student.id}) }}">show
                        </a>#}
                        <a class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                href="{{ path('admin_student_edit', {'id': student.id}) }}">Edit
                        </a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4">no records found</td>
                </tr>
            {% endfor %}

            </tbody>
        </table>
    </div>

    <script>
        function editStudent(studentId) {
            // Construct the URL using the student ID
            var url = "{{ path('admin_student_show', {'id': 'STUDENT_ID'}) }}".replace('STUDENT_ID', studentId);
            
            // Redirect the user to the edit page
            window.location.href = url;
        }
    </script>


{% endblock %}
